import{i as D,T as b,J as x,o as a,c as A,w as y,a as s,t as d,g as h,e as n,b as k,p as S,u as e,j as v,v as B,d as m,f as _,W as C,l as N,F as O,r as T}from"./app-DYrR7Grp.js";import{_ as E}from"./AppLayout-YqD8XSQj.js";import{_ as P}from"./SoftInput-DDylL9rA.js";import{_ as w}from"./InputError-DWI--Z5X.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DSNejwUh.js";import"./bootstrap.esm-BUwkA-Zi.js";const M={class:"container-fluid mt-4"},z={class:"row mb-5"},q={class:"col-lg-12 mt-lg-0 mt-4"},I={class:"card card-body",id:"profile"},J={class:"row justify-content-center align-items-center"},L={class:"col-sm-auto col-4"},W={class:"avatar avatar-xl position-relative"},G=["src","alt"],H={class:"col-sm-auto col-8 my-auto"},K={class:"h-100"},Q={class:"mb-1 font-weight-bolder"},R={class:"mb-0 font-weight-bold text-sm"},X=s("i",{class:"fas fa-minus text-dark me-2","aria-hidden":"true"},null,-1),Y={class:"col-sm-auto ms-sm-auto mt-sm-0 mt-3 d-flex"},Z=s("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),ss={key:0,class:"row mt-4 flex"},ts={class:"g-3 mt-lg-0 mt-2 d-inline-flex flex-row justify-content-start"},es=s("span",{class:"input-group-text"},"$",-1),os=s("div",{class:"col-auto"},[s("button",{type:"submit",name:"button",class:"m-0 btn bg-gradient-success ms-2"}," Submit ")],-1),as={key:1,class:"row mt-4 flex"},ns={class:"row col-5"},ls=s("label",null,"Password",-1),is={class:"row col-5"},rs=s("label",null,"Confirm Password",-1),ds=s("div",{class:"col-auto"},[s("button",{type:"submit",name:"button",class:"m-0 btn bg-gradient-success"}," Submit ")],-1),cs={class:"col-lg-6 mt-lg-0 mt-4"},us={class:"card mt-4"},ms=s("div",{class:"card-header"},[s("h5",null,"User Settings"),s("p",{class:"text-sm"},"Control user settings")],-1),_s={class:"card-body pt-0"},hs={class:"table-responsive"},ps={class:"table mb-0"},fs=s("thead",null,[s("tr",null,[s("th",{class:"ps-1",colspan:"4"},[s("p",{class:"mb-0"},"Setting")]),s("th",{class:"text-center"},[s("p",{class:"mb-0"},"Status")])])],-1),bs=s("td",{class:"ps-1",colspan:"4"},[s("div",{class:"my-auto"},[s("span",{class:"text-dark d-block text-sm"},"API"),s("span",{class:"text-xs font-weight-normal"},"Enable or forbid the user from using API.")])],-1),vs={class:"form-check form-switch mb-0 d-flex align-items-center justify-content-center"},ws=s("td",{class:"ps-1",colspan:"4"},[s("div",{class:"my-auto"},[s("span",{class:"text-dark d-block text-sm"},"Active"),s("span",{class:"text-xs font-weight-normal"},"Enable or disable user from logging in and using the system.")])],-1),gs={class:"form-check form-switch mb-0 d-flex align-items-center justify-content-center"},xs={class:"col-lg-6 mt-lg-0 mt-4"},ys={class:"card mt-4"},ks={class:"card-header"},Ss={class:"row"},Cs=s("div",{class:"col-md-6"},[s("h5",null,"Transactions")],-1),Ps={class:"col-md-6 d-flex justify-content-end align-items-center"},js=s("small",null,[h("More "),s("i",{class:"fa fa-chevron-right ms-2","aria-hidden":"true"})],-1),Vs={class:"card-body pt-0"},Fs={key:0,class:"table-responsive"},Us={class:"list-group"},$s={class:"list-group-item border-0 d-flex justify-content-between ps-0 mb-2 border-radius-lg"},Ds={class:"d-flex align-items-center"},As={key:0,class:"fas fa-arrow-up","aria-hidden":"true"},Bs={key:1,class:"fas fa-arrow-down","aria-hidden":"true"},Ns={class:"d-flex flex-column"},Os={key:0,class:"mb-1 text-dark text-sm text-capitalize"},Ts={key:1,class:"mb-1 text-dark text-sm text-capitalize"},Es={class:"text-xs"},Ms={key:0,class:"d-flex align-items-center text-success text-gradient text-sm font-weight-bold"},zs={key:1,class:"d-flex align-items-center text-danger text-gradient text-sm font-weight-bold"},qs={key:1},Is=s("small",null,"No Transactions",-1),Js=[Is],Ys={__name:"Show",props:{user:{type:Object,required:!0},transactions:{type:Object,required:!0}},setup(i){const g=D("$swal"),{user:c}=i,u=b({enabled:c.enabled,api_enabled:c.api_enabled}),j=()=>{u.post(route("user.set-status",c.id),{preserveScroll:!0,preserveState:!0})},V=()=>{u.post(route("user.set-status",c.id),{preserveScroll:!0,preserveState:!0})},p=x(!1),f=x(!1),r=b({amount:0}),l=b({password:"",password_confirmation:""}),F=()=>{r.post(route("users.deduct",c.id),{onSuccess:()=>{g.fire({title:"Success!",text:"Credits was deducted successfully!",icon:"success"}),r.reset()},onFinish:()=>r.reset()})},U=()=>{l.post(route("users.set-password",c.id),{onSuccess:()=>{g.fire({title:"Success!",text:"Password changed successfully!",icon:"success"}),l.reset()},onFinish:()=>l.reset()})};return($,o)=>(a(),A(E,{title:"Preview User"},{default:y(()=>[s("div",M,[s("div",z,[s("div",q,[s("div",I,[s("div",J,[s("div",L,[s("div",W,[s("img",{src:i.user.profile_photo_path,alt:i.user.name,class:"w-100 border-radius-lg shadow-sm"},null,8,G)])]),s("div",H,[s("div",K,[s("h5",Q,d(i.user.name),1),s("p",R,[h(" Balance: "+d(i.user.balance.formatted)+" ",1),s("a",{class:"btn btn-link text-dark px-3 mb-0",href:"javascript:;",onClick:o[0]||(o[0]=t=>p.value=!p.value)},[X,h("Deduct ")])])])]),s("div",Y,[s("a",{class:"btn btn-link text-dark px-3 mb-0",href:"javascript:;",onClick:o[1]||(o[1]=t=>f.value=!f.value)},[Z,h("Edit ")])])]),p.value?(a(),n("div",ss,[s("form",{class:"form-inline",onSubmit:k(F,["prevent"])},[s("div",ts,[s("div",{class:S(["col-auto input-group",{"is-invalid":e(r).errors.hasOwnProperty("amount")}])},[es,v(s("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>e(r).amount=t),type:"number",class:"form-control","aria-label":"Amount (to the nearest dollar)"},null,512),[[B,e(r).amount]])],2),os]),m(w,{class:"mt-3",message:e(r).errors.amount},null,8,["message"])],32)])):_("",!0),f.value?(a(),n("div",as,[s("form",{onSubmit:k(U,["prevent"])},[s("div",ns,[ls,m(P,{modelValue:e(l).password,"onUpdate:modelValue":o[3]||(o[3]=t=>e(l).password=t),id:"password",type:"password",placeholder:"Password","aria-label":"Password",error:e(l).errors.hasOwnProperty("password")},null,8,["modelValue","error"]),m(w,{class:"mt-2",message:e(l).errors.password},null,8,["message"])]),s("div",is,[rs,m(P,{modelValue:e(l).password_confirmation,"onUpdate:modelValue":o[4]||(o[4]=t=>e(l).password_confirmation=t),id:"password_confirmation",type:"password",placeholder:"Password Confirmation","aria-label":"Password Confirmation",error:e(l).errors.hasOwnProperty("password_confirmation")},null,8,["modelValue","error"]),m(w,{class:"mt-2",message:e(l).errors.password_confirmation},null,8,["message"])]),ds],32)])):_("",!0)])]),s("div",cs,[s("div",us,[ms,s("div",_s,[s("div",hs,[s("table",ps,[fs,s("tbody",null,[s("tr",null,[bs,s("td",null,[s("div",vs,[v(s("input",{"onUpdate:modelValue":o[5]||(o[5]=t=>e(u).api_enabled=t),class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault12",onChange:V},null,544),[[C,e(u).api_enabled]])])])]),s("tr",null,[ws,s("td",null,[s("div",gs,[v(s("input",{"onUpdate:modelValue":o[6]||(o[6]=t=>e(u).enabled=t),class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault11",onChange:j},null,544),[[C,e(u).enabled]])])])])])])])])])]),s("div",xs,[s("div",ys,[s("div",ks,[s("div",Ss,[Cs,s("div",Ps,[m(e(N),{href:$.route("user.transactions",i.user.id)},{default:y(()=>[js]),_:1},8,["href"])])])]),s("div",Vs,[i.transactions.total>0?(a(),n("div",Fs,[s("ul",Us,[(a(!0),n(O,null,T(i.transactions.data,(t,Ls)=>(a(),n("li",$s,[s("div",Ds,[s("span",{class:S(["btn btn-icon-only btn-rounded mb-0 me-3 btn-sm d-flex align-items-center justify-content-center",{"btn-outline-success":t.direction==="in","btn-outline-danger":t.direction==="out"}])},[t.direction==="in"?(a(),n("i",As)):_("",!0),t.direction==="out"?(a(),n("i",Bs)):_("",!0)],2),s("div",Ns,[t.type==="internal"?(a(),n("h6",Os,d(t.type),1)):(a(),n("h6",Ts,d(t.payment_method),1)),s("span",Es,d(t.formatted_created_at),1)])]),t.direction==="in"?(a(),n("div",Ms," + "+d(t.amount.formatted),1)):_("",!0),t.direction==="out"?(a(),n("div",zs," - "+d(t.amount.formatted),1)):_("",!0)]))),256))])])):(a(),n("div",qs,Js))])])])])])]),_:1}))}};export{Ys as default};
